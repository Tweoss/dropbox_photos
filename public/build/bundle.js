var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function i(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let r,s;function l(e,t){return r||(r=document.createElement("a")),r.href=t,e===r.href}function c(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function d(e,t,n){e.$$.on_destroy.push(c(t,n))}function u(e,t){e.appendChild(t)}function h(e,t,n){e.insertBefore(t,n||null)}function m(e){e.parentNode.removeChild(e)}function f(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function p(e){return document.createElement(e)}function _(e){return document.createTextNode(e)}function g(){return _(" ")}function v(){return _("")}function y(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function w(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function b(e,t,n,o){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function x(e){s=e}function $(e){(function(){if(!s)throw new Error("Function called outside component initialization");return s})().$$.on_mount.push(e)}const k=[],S=[],T=[],E=[],O=Promise.resolve();let C=!1;function A(e){T.push(e)}const z=new Set;let N=0;function j(){const e=s;do{for(;N<k.length;){const e=k[N];N++,x(e),L(e.$$)}for(x(null),k.length=0,N=0;S.length;)S.pop()();for(let e=0;e<T.length;e+=1){const t=T[e];z.has(t)||(z.add(t),t())}T.length=0}while(k.length);for(;E.length;)E.pop()();C=!1,z.clear(),x(e)}function L(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(A)}}const U=new Set;let I;function K(){I={r:0,c:[],p:I}}function P(){I.r||o(I.c),I=I.p}function R(e,t){e&&e.i&&(U.delete(e),e.i(t))}function D(e,t,n,o){if(e&&e.o){if(U.has(e))return;U.add(e),I.c.push((()=>{U.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}}const q="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function B(e){e&&e.c()}function M(e,n,a,r){const{fragment:s,on_mount:l,on_destroy:c,after_update:d}=e.$$;s&&s.m(n,a),r||A((()=>{const n=l.map(t).filter(i);c?c.push(...n):o(n),e.$$.on_mount=[]})),d.forEach(A)}function V(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function H(e,t){-1===e.$$.dirty[0]&&(k.push(e),C||(C=!0,O.then(j)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function J(t,i,a,r,l,c,d,u=[-1]){const h=s;x(t);const f=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(h?h.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:i.target||h.$$.root};d&&d(f.root);let p=!1;if(f.ctx=a?a(t,i.props||{},((e,n,...o)=>{const i=o.length?o[0]:n;return f.ctx&&l(f.ctx[e],f.ctx[e]=i)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](i),p&&H(t,e)),n})):[],f.update(),p=!0,o(f.before_update),f.fragment=!!r&&r(f.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);f.fragment&&f.fragment.l(e),e.forEach(m)}else f.fragment&&f.fragment.c();i.intro&&R(t.$$.fragment),M(t,i.target,i.anchor,i.customElement),j()}x(h)}class F{$destroy(){V(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class Y{constructor(e){this.path=e}async loadThumbnail(e,t="w64h64"){const n=await fetch("https://content.dropboxapi.com/2/files/get_thumbnail_v2",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Dropbox-API-Arg":`{"resource":{".tag":"path","path":"${this.path}"},"size":{".tag":"${t}"}}`}}),o=await n.blob();return URL.createObjectURL(o)}async loadImage(e){const t=await fetch("https://content.dropboxapi.com/2/files/download",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Dropbox-API-Arg":`{"path":"${this.path}"}`}}),n=await t.blob();return URL.createObjectURL(n)}async loadVideo(e,t){const n=await fetch("https://content.dropboxapi.com/2/files/download",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Dropbox-API-Arg":`{"path":"${t}"}`}}),o=await n.blob();return URL.createObjectURL(o)}}var G;!function(e){e.Image="Image",e.Video="video"}(G||(G={}));class W{constructor(e){this.dimensions=null,this.path=e}async init(e){const t=await fetch("https://api.dropboxapi.com/2/files/get_metadata",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({include_media_info:!0,path:this.path})}),n=await t.json();return this.name=n.name,this.last_modified=n.server_modified,this.time_taken=n.media_info.metadata.time_taken,this.dimensions=n.media_info.metadata.dimensions,"video"===n.media_info.metadata[".tag"]?(this.filetype=G.Video,this.duration=n.media_info.metadata.duration):"photo"===n.media_info.metadata[".tag"]&&(this.filetype=G.Image),this}}class Q{constructor(){this.is_selected=!1,this.metadata=null}async init(e,t){return this.metadata=await new W(t).init(e),this}set_live_video_data(e){this.live_video_metadata=e}}class X{constructor(){this.entries=new Map}async valid_token_set(e,t){var n,o;const i=t||(null===(o=null===(n=e.split("#")[1])||void 0===n?void 0:n.split("&")[0])||void 0===o?void 0:o.split("=")[1]);return i?fetch("https://api.dropboxapi.com/2/check/user",{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({})}).then((e=>{if(200==e.status)return this.access_token=i,!0})):Promise.resolve(!1)}redirect_to_auth(e){e.href=`https://www.dropbox.com/oauth2/authorize?client_id=9a3dfm0r2xv45sq&response_type=token&redirect_uri=${e.protocol}//${e.host+e.pathname}`}async build_index(e=""){let t=!0;for(;t;){const n=await fetch("https://api.dropboxapi.com/2/files/list_folder",{method:"POST",headers:{Authorization:`Bearer ${this.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({path:e,recursive:!1})}),o=await n.json();t=o.has_more,await Promise.all(o.entries.map((async e=>(new Q).init(this.access_token,e.path_lower).then((t=>{this.entries.set(e.name,t)})))))}}collapse_index(){for(const[e,t]of this.entries)if(e.endsWith(".mov")){const n=this.entries.get(e.substring(0,e.length-4)+".JPG");n&&(n.set_live_video_data(t.metadata),this.entries.delete(e))}}get_sorted_permutation(){const e=[...this.entries.entries()].map((e=>[e[0],new Date(e[1].metadata.time_taken)]));return e.sort(((e,t)=>e[1].valueOf()-t[1].valueOf())),e.map((e=>e[0]))}get_sorted_event_array(){const e=this.get_sorted_permutation();let t=0,n=[],o=[];for(let r=0;r<e.length;r++){const s=e[r],l=this.entries.get(s);if(n[t]){const e=new Date(l.metadata.time_taken);i=e,a=o[t][0],Math.abs(i.getTime()-a.getTime())<288e5?(n[t].push(l),o[t].push(e)):(t+=1,n[t]=[l],o[t]=[new Date(l.metadata.time_taken)])}else n[t]=[l],o[t]=[new Date(l.metadata.time_taken)]}var i,a;return n}handle_keydown(e,t,n){var o;let i=t;const a=e=>{e.preventDefault(),e.stopPropagation()};return"ArrowLeft"==e.key?(0==i.entry_index?0!=i.event_index&&(i.event_index-=1,i.entry_index=n[i.event_index].length-1):i.entry_index-=1,a(e)):"ArrowRight"==e.key?(i.entry_index==(null===(o=n[i.event_index])||void 0===o?void 0:o.length)-1?i.event_index!=n.length-1&&(i.event_index+=1,i.entry_index=0):i.entry_index+=1,a(e)):"ArrowUp"==e.key?(i.file_info=!0,a(e)):"ArrowDown"==e.key?(i.file_info=!1,a(e)):" "==e.key&&(i.maximized=!i.maximized,a(e)),i}}const Z=[];const ee=function(t,n=e){let o;const i=new Set;function r(e){if(a(t,e)&&(t=e,o)){const e=!Z.length;for(const e of i)e[1](),Z.push(e,t);if(e){for(let e=0;e<Z.length;e+=2)Z[e][0](Z[e+1]);Z.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(a,s=e){const l=[a,s];return i.add(l),1===i.size&&(o=n(r)||e),a(t),()=>{i.delete(l),0===i.size&&(o(),o=null)}}}}({event_index:-1,entry_index:-1,maximized:!1,file_info:!1});function te(t){let n,i,a,r,s,c,d;return{c(){n=p("div"),i=p("img"),l(i.src,a=t[3])||w(i,"src",a),w(i,"alt",r=t[0].metadata.name),w(i,"class",s=(t[6].event_index==t[1]&&t[6].entry_index==t[2]?"selected":"")+" "+t[4].scale_class+" svelte-12566eq"),b(i,"top",t[4].top+"%"),b(i,"left",t[4].left+"%"),w(n,"class","container svelte-12566eq")},m(e,o){h(e,n,o),u(n,i),t[9](i),c||(d=[y(i,"load",t[10],{once:!0}),y(i,"click",t[11])],c=!0)},p(e,[t]){8&t&&!l(i.src,a=e[3])&&w(i,"src",a),1&t&&r!==(r=e[0].metadata.name)&&w(i,"alt",r),86&t&&s!==(s=(e[6].event_index==e[1]&&e[6].entry_index==e[2]?"selected":"")+" "+e[4].scale_class+" svelte-12566eq")&&w(i,"class",s),16&t&&b(i,"top",e[4].top+"%"),16&t&&b(i,"left",e[4].left+"%")},i:e,o:e,d(e){e&&m(n),t[9](null),c=!1,o(d)}}}function ne(e,t,n){let o;d(e,ee,(e=>n(6,o=e)));let i,a,r,{ACCESS_TOKEN:s}=t,{image_entry:l}=t,{default_data:c=""}=t,{event_index:u}=t,{entry_index:h}=t,m=c;const f=new Y(l.metadata.path);let p={top:0,left:0,scale_class:""};const _=()=>{const e=l.metadata.dimensions;return e.height==e.width?{top:0,left:0,scale_class:""}:e.height>e.width?{top:0,left:100*(1-e.width/e.height)/2,scale_class:"width-auto"}:e.width>e.height?{top:100*(1-e.height/e.width)/2,left:0,scale_class:"height-auto"}:void 0},g=(e,t)=>{e[0].isIntersecting?a?n(3,m=a):f.loadThumbnail(s,"w256h256").then((e=>{a=e,!r&&URL.revokeObjectURL(r),n(3,m=a),n(4,p=_())})):!r&&f.loadThumbnail(s).then((e=>{r=e,n(3,m=r),n(4,p=_())}))};let v,y;$((()=>{v=new IntersectionObserver(g,{}),v.observe(y)})),ee.subscribe((e=>{e.event_index==u&&e.entry_index==h&&(y.scrollIntoView({behavior:"smooth",block:"center"}),i?n(3,m=i):f.loadImage(s).then((e=>{i=e,n(3,m=i),n(4,p=_())})))}));return e.$$set=e=>{"ACCESS_TOKEN"in e&&n(7,s=e.ACCESS_TOKEN),"image_entry"in e&&n(0,l=e.image_entry),"default_data"in e&&n(8,c=e.default_data),"event_index"in e&&n(1,u=e.event_index),"entry_index"in e&&n(2,h=e.entry_index)},[l,u,h,m,p,y,o,s,c,function(e){S[e?"unshift":"push"]((()=>{y=e,n(5,y)}))},()=>{URL.revokeObjectURL(m)},()=>{ee.update((e=>(e.event_index=u,e.entry_index=h,e)))}]}class oe extends F{constructor(e){super(),J(this,e,ne,te,a,{ACCESS_TOKEN:7,image_entry:0,default_data:8,event_index:1,entry_index:2})}}function ie(t){let n,i,a,r,s,c,d,f,v,x;return{c(){n=p("div"),i=p("video"),a=_("Sorry, your browser doesn't support embedded videos."),c=g(),d=p("i"),l(i.src,r=t[3])||w(i,"src",r),w(i,"poster",t[2]),w(i,"class",s=(t[4]?"selected":"")+" "+t[6].scale_class+" "+(t[5]?"maximized":"")+" svelte-e191tk"),b(i,"top",(t[5]?"0":t[6].top)+"%"),b(i,"left",(t[5]?"0":t[6].left)+"%"),b(d,"top",t[6].top+"%"),b(d,"left",t[6].left+"%"),b(d,"color","lightgray"),w(d,"class",f=(t[7]?"fa fa-play-circle-o ":"")+" "+(t[5]?"hidden":"")+" svelte-e191tk"),w(n,"class","container svelte-e191tk")},m(e,o){h(e,n,o),u(n,i),u(i,a),t[11](i),u(n,c),u(n,d),v||(x=[y(i,"load",t[12],{once:!0}),y(i,"focus",t[13]),y(i,"mouseover",t[14]),y(i,"mouseleave",t[15]),y(i,"click",t[16])],v=!0)},p(e,[t]){8&t&&!l(i.src,r=e[3])&&w(i,"src",r),4&t&&w(i,"poster",e[2]),112&t&&s!==(s=(e[4]?"selected":"")+" "+e[6].scale_class+" "+(e[5]?"maximized":"")+" svelte-e191tk")&&w(i,"class",s),96&t&&b(i,"top",(e[5]?"0":e[6].top)+"%"),96&t&&b(i,"left",(e[5]?"0":e[6].left)+"%"),64&t&&b(d,"top",e[6].top+"%"),64&t&&b(d,"left",e[6].left+"%"),160&t&&f!==(f=(e[7]?"fa fa-play-circle-o ":"")+" "+(e[5]?"hidden":"")+" svelte-e191tk")&&w(d,"class",f)},i:e,o:e,d(e){e&&m(n),t[11](null),v=!1,o(x)}}}function ae(e,t,n){let o,i,a,{ACCESS_TOKEN:r}=t,{image_entry:s}=t,{default_data:l=""}=t,{event_index:c}=t,{entry_index:d}=t,u=l,h=null,m=!1,f=!1;const p=new Y(s.metadata.path);let _={top:0,left:0,scale_class:""};const g=()=>{const e=s.metadata.dimensions;return e.height==e.width?{top:0,left:0,scale_class:""}:e.height>e.width?{top:0,left:100*(1-e.width/e.height)/2,scale_class:"width-auto"}:e.width>e.height?{top:100*(1-e.height/e.width)/2,left:0,scale_class:"height-auto"}:void 0},v=(e,t)=>{e[0].isIntersecting?(i?n(2,u=i):p.loadThumbnail(r,"w640h480").then((e=>{i=e,n(2,u=i),n(6,_=g())})),!h&&p.loadVideo(r,s.live_video_metadata.path).then((e=>{n(3,h=e)}))):!a&&p.loadThumbnail(r).then((e=>{a=e,n(2,u=a),n(6,_=g())}))};let y,w;$((()=>{y=new IntersectionObserver(v,{root:void 0}),y.observe(w)})),ee.subscribe((e=>{const t=m;n(4,m=e.event_index==c&&e.entry_index==d),e.maximized&&t&&m&&n(5,f=!0),!e.maximized&&t&&m&&n(5,f=!1),m&&!t&&(w.scrollIntoView({behavior:"smooth",block:"center"}),o?n(2,u=o):p.loadImage(r).then((e=>{o=e,n(2,u=o),n(6,_=g())})))}));return e.$$set=e=>{"ACCESS_TOKEN"in e&&n(8,r=e.ACCESS_TOKEN),"image_entry"in e&&n(9,s=e.image_entry),"default_data"in e&&n(10,l=e.default_data),"event_index"in e&&n(0,c=e.event_index),"entry_index"in e&&n(1,d=e.entry_index)},[c,d,u,h,m,f,_,w,r,s,l,function(e){S[e?"unshift":"push"]((()=>{w=e,n(7,w)}))},()=>{URL.revokeObjectURL(h),URL.revokeObjectURL(u)},()=>w.play(),()=>w.play(),()=>{w.pause(),n(7,w.currentTime=0,w),w.load()},()=>{ee.update((e=>(e.event_index=c,e.entry_index=d,e)))}]}class re extends F{constructor(e){super(),J(this,e,ae,ie,a,{ACCESS_TOKEN:8,image_entry:9,default_data:10,event_index:0,entry_index:1})}}function se(e,t,n){const o=e.slice();return o[4]=t[n],o[6]=n,o}function le(t){let n,o;return{c(){n=p("img"),l(n.src,o="placeholder.png")||w(n,"src","placeholder.png"),w(n,"alt","placeholder")},m(e,t){h(e,n,t)},p:e,i:e,o:e,d(e){e&&m(n)}}}function ce(e){let t,n,o,i;const a=[ue,de],r=[];function s(e,t){return e[4].live_video_metadata?0:1}return t=s(e),n=r[t]=a[t](e),{c(){n.c(),o=v()},m(e,n){r[t].m(e,n),h(e,o,n),i=!0},p(e,i){let l=t;t=s(e),t===l?r[t].p(e,i):(K(),D(r[l],1,1,(()=>{r[l]=null})),P(),n=r[t],n?n.p(e,i):(n=r[t]=a[t](e),n.c()),R(n,1),n.m(o.parentNode,o))},i(e){i||(R(n),i=!0)},o(e){D(n),i=!1},d(e){r[t].d(e),e&&m(o)}}}function de(e){let t,n;return t=new oe({props:{ACCESS_TOKEN:e[0],image_entry:e[4],default_data:"./placeholder.png",event_index:e[2],entry_index:e[6]}}),{c(){B(t.$$.fragment)},m(e,o){M(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.ACCESS_TOKEN=e[0]),2&n&&(o.image_entry=e[4]),4&n&&(o.event_index=e[2]),t.$set(o)},i(e){n||(R(t.$$.fragment,e),n=!0)},o(e){D(t.$$.fragment,e),n=!1},d(e){V(t,e)}}}function ue(e){let t,n;return t=new re({props:{ACCESS_TOKEN:e[0],image_entry:e[4],default_data:"./placeholder.png",event_index:e[2],entry_index:e[6]}}),{c(){B(t.$$.fragment)},m(e,o){M(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.ACCESS_TOKEN=e[0]),2&n&&(o.image_entry=e[4]),4&n&&(o.event_index=e[2]),t.$set(o)},i(e){n||(R(t.$$.fragment,e),n=!0)},o(e){D(t.$$.fragment,e),n=!1},d(e){V(t,e)}}}function he(e){let t,n,o,i;const a=[ce,le],r=[];function s(e,t){return e[4].metadata.filetype==G.Image?0:1}return t=s(e),n=r[t]=a[t](e),{c(){n.c(),o=v()},m(e,n){r[t].m(e,n),h(e,o,n),i=!0},p(e,i){let l=t;t=s(e),t===l?r[t].p(e,i):(K(),D(r[l],1,1,(()=>{r[l]=null})),P(),n=r[t],n?n.p(e,i):(n=r[t]=a[t](e),n.c()),R(n,1),n.m(o.parentNode,o))},i(e){i||(R(n),i=!0)},o(e){D(n),i=!1},d(e){r[t].d(e),e&&m(o)}}}function me(e){let t,n,o,i,a=e[1],r=[];for(let t=0;t<a.length;t+=1)r[t]=he(se(e,a,t));const s=e=>D(r[e],1,1,(()=>{r[e]=null}));return{c(){t=p("div"),n=p("h2"),n.textContent=`${e[3]()}`,o=g();for(let e=0;e<r.length;e+=1)r[e].c();w(n,"class","timestamps svelte-16t62c2"),w(t,"class","svelte-16t62c2")},m(e,a){h(e,t,a),u(t,n),u(t,o);for(let e=0;e<r.length;e+=1)r[e].m(t,null);i=!0},p(e,[n]){if(7&n){let o;for(a=e[1],o=0;o<a.length;o+=1){const i=se(e,a,o);r[o]?(r[o].p(i,n),R(r[o],1)):(r[o]=he(i),r[o].c(),R(r[o],1),r[o].m(t,null))}for(K(),o=a.length;o<r.length;o+=1)s(o);P()}},i(e){if(!i){for(let e=0;e<a.length;e+=1)R(r[e]);i=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)D(r[e]);i=!1},d(e){e&&m(t),f(r,e)}}}function fe(e,t,n){let{ACCESS_TOKEN:o}=t,{event_contents:i=[]}=t,{event_index:a}=t;return e.$$set=e=>{"ACCESS_TOKEN"in e&&n(0,o=e.ACCESS_TOKEN),"event_contents"in e&&n(1,i=e.event_contents),"event_index"in e&&n(2,a=e.event_index)},[o,i,a,()=>{let e=new Date(i[0].metadata.time_taken);console.log(e,i[0].metadata.time_taken);let t=new Date(i[i.length-1].metadata.time_taken);return e.setTime(e.getTime()+60*e.getTimezoneOffset()*1e3),t.setTime(t.getTime()+60*t.getTimezoneOffset()*1e3),1==i.length||i[0].metadata.time_taken==i[i.length-1].metadata.time_taken?e.toLocaleDateString("en-US",{dateStyle:"full"})+", "+e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0"):e.getDate()==t.getDate()&&e.getMonth()==t.getMonth()&&e.getFullYear()==t.getFullYear()?`${e.toLocaleString("en-US",{dateStyle:"full",timeStyle:"short",hour12:!1})}-${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`:`${e.toLocaleString("en-US",{dateStyle:"full",timeStyle:"short",hour12:!1})}—${t.toLocaleString("en-US",{dateStyle:"full",timeStyle:"short",hour12:!1})}`}]}class pe extends F{constructor(e){super(),J(this,e,fe,me,a,{ACCESS_TOKEN:0,event_contents:1,event_index:2})}}function _e(e){let t,n,o,i;return{c(){t=p("button"),n=_(e[1]),w(t,"class","svelte-16krlth")},m(a,r){h(a,t,r),u(t,n),o||(i=y(t,"click",e[2]),o=!0)},p(e,t){2&t&&function(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}(n,e[1])},d(e){e&&m(t),o=!1,i()}}}function ge(t){let n,i,a,r=t[0]&&_e(t);return{c(){r&&r.c(),n=v()},m(e,o){r&&r.m(e,o),h(e,n,o),i||(a=[y(window,"click",t[3]),y(window,"keydown",t[4])],i=!0)},p(e,[t]){e[0]?r?r.p(e,t):(r=_e(e),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:e,o:e,d(e){r&&r.d(e),e&&m(n),i=!1,o(a)}}}function ve(e,t,n){let o=!0;var i;i=navigator.userAgent||navigator.vendor,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(i)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(i.slice(0,4)))&&n(0,o=!1);let a="Interact to enable video!";const r=()=>{n(1,a="Enabled!"),setTimeout((()=>{n(0,o=!1)}),1e3)};return[o,a,r,e=>r(),e=>r()]}class ye extends F{constructor(e){super(),J(this,e,ve,ge,a,{})}}const{window:we}=q;function be(e,t,n){const o=e.slice();return o[4]=t[n],o[6]=n,o}function xe(e){let t,n;return t=new pe({props:{ACCESS_TOKEN:e[2].access_token,event_contents:e[4],event_index:e[6]}}),{c(){B(t.$$.fragment)},m(e,o){M(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.event_contents=e[4]),t.$set(o)},i(e){n||(R(t.$$.fragment,e),n=!0)},o(e){D(t.$$.fragment,e),n=!1},d(e){V(t,e)}}}function $e(e){let t;return{c(){t=p("div"),t.innerHTML="<p>HI</p>"},m(e,n){h(e,t,n)},d(e){e&&m(t)}}}function ke(e){let t,n,o,i,a,r,s,l,c,d,_;r=new ye({});let v=e[0],b=[];for(let t=0;t<v.length;t+=1)b[t]=xe(be(e,v,t));const x=e=>D(b[e],1,1,(()=>{b[e]=null}));let $=e[1].file_info&&$e();return{c(){t=p("main"),n=p("link"),o=g(),i=p("h1"),i.textContent="🐟 Photos 🐈",a=g(),B(r.$$.fragment),s=g();for(let e=0;e<b.length;e+=1)b[e].c();l=g(),$&&$.c(),w(n,"rel","stylesheet"),w(n,"href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"),w(i,"class","svelte-d9gu0h"),w(t,"class","svelte-d9gu0h")},m(m,f){h(m,t,f),u(t,n),u(t,o),u(t,i),u(t,a),M(r,t,null),u(t,s);for(let e=0;e<b.length;e+=1)b[e].m(t,null);u(t,l),$&&$.m(t,null),c=!0,d||(_=y(we,"keydown",e[3]),d=!0)},p(e,[n]){if(5&n){let o;for(v=e[0],o=0;o<v.length;o+=1){const i=be(e,v,o);b[o]?(b[o].p(i,n),R(b[o],1)):(b[o]=xe(i),b[o].c(),R(b[o],1),b[o].m(t,l))}for(K(),o=v.length;o<b.length;o+=1)x(o);P()}e[1].file_info?$||($=$e(),$.c(),$.m(t,null)):$&&($.d(1),$=null)},i(e){if(!c){R(r.$$.fragment,e);for(let e=0;e<v.length;e+=1)R(b[e]);c=!0}},o(e){D(r.$$.fragment,e),b=b.filter(Boolean);for(let e=0;e<b.length;e+=1)D(b[e]);c=!1},d(e){e&&m(t),V(r),f(b,e),$&&$.d(),d=!1,_()}}}function Se(e,t,n){let o;d(e,ee,(e=>n(1,o=e)));let i=[],a=new X;a.valid_token_set(window.location.href).then((e=>e?0:a.redirect_to_auth(window.location))).then((()=>{console.log(a),a.build_index().then((()=>{a.collapse_index(),n(0,i=a.get_sorted_event_array())}))}));return[i,o,a,e=>ee.set(a.handle_keydown(e,function(e){let t;return c(e,(e=>t=e))(),t}(ee),i))]}return new class extends F{constructor(e){super(),J(this,e,Se,ke,a,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
